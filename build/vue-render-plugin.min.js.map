{"version":3,"file":"vue-render-plugin.min.js","sources":["../src/filters.js","../src/index.js"],"sourcesContent":["import Vue from 'vue';\n\nVue.filter('kebab', (str) => {\n    const replace = s =>  s.toLowerCase().replace(/ /g, '-');\n\n    return Array.isArray(str) ?  str.map(replace) : replace(str);\n});","import './filters';\nimport Node from './Node.vue';\nimport Vue from 'vue';\n\nfunction createVue(el, vueComponent, vueProps) {\n    const app = new Vue({\n        render: h => h(vueComponent, { props: vueProps })\n    });\n\n    const nodeEl = document.createElement('div');\n\n    el.appendChild(nodeEl);\n    app.$mount(nodeEl);\n    \n    return app;\n}\n\nfunction createNode(editor, { el, node, component, bindSocket, bindControl }) {\n    const vueComponent = component.component || Node;\n    const vueProps = { ...component.props, node, editor, bindSocket, bindControl };\n    const app = createVue(el, vueComponent, vueProps);\n\n    node.vueContext = app.$children[0];\n\n    return app;\n}\n\nfunction createControl(editor, { el, control }) {\n    const vueComponent = control.component;\n    const vueProps = { ...control.props, getData: control.getData.bind(control), putData: control.putData.bind(control) };\n    const app = createVue(el, vueComponent, vueProps);\n\n    control.vueContext = app.$children[0];\n\n    return app;\n}\n\nconst update = (entity) => {\n    if (entity.vueContext)\n        entity.vueContext.$forceUpdate();\n}\n\nfunction install(editor, params) {\n    editor.on('rendernode', ({ el, node, component, bindSocket, bindControl }) => {\n        if (component.render && component.render !== 'vue') return;\n        node._vue = createNode(editor, { el, node, component, bindSocket, bindControl });\n        node.update = () => update(node);\n    });\n\n    editor.on('rendercontrol', ({ el, control }) => {\n        if (control.render && control.render !== 'alight') return;\n        control._vue = createControl(editor, { el, control });\n        control.update = () => update(control)\n    });\n\n    editor.on('connectioncreated connectionremoved', connection => {\n        update(connection.input.node)\n    });\n\n    editor.on('nodeselected', () => {\n        editor.nodes.map(update);\n    });\n}\n\nexport default {\n    install\n}"],"names":["filter","str","replace","s","toLowerCase","Array","isArray","map","createVue","el","vueComponent","vueProps","app","Vue","h","props","nodeEl","document","createElement","appendChild","$mount","update","entity","vueContext","$forceUpdate","editor","params","on","node","component","bindSocket","bindControl","render","_vue","Node","$children","control","getData","bind","putData","connection","input","nodes"],"mappings":";;;;;k2MAEIA,OAAO,QAAS,SAACC,OACXC,EAAU,mBAAMC,EAAEC,cAAcF,QAAQ,KAAM,aAE7CG,MAAMC,QAAQL,GAAQA,EAAIM,IAAIL,GAAWA,EAAQD,yrTCDnDO,EAAUC,EAAIC,EAAcC,OAC3BC,EAAM,IAAIC,EAAI,QACR,mBAAKC,EAAEJ,EAAc,CAAEK,MAAOJ,OAGpCK,EAASC,SAASC,cAAc,gBAEnCC,YAAYH,KACXI,OAAOJ,GAEJJ,EAuBX,IAAMS,EAAS,SAACC,GACRA,EAAOC,YACPD,EAAOC,WAAWC,sBAyBX,SAtBf,SAAiBC,EAAQC,KACdC,GAAG,aAAc,gBA1BRF,IAAUhB,EAAImB,EAAMC,EAAWC,EAAYC,EAGrDnB,EAuBqBH,IAAAA,GAAImB,IAAAA,KAAMC,IAAAA,UAAWC,IAAAA,WAAYC,IAAAA,YACpDF,EAAUG,QAA+B,QAArBH,EAAUG,WAC7BC,MA5BOR,EA4BWA,EA5BDhB,KA4BS,CAAEA,KAAImB,OAAMC,YAAWC,aAAYC,gBA5B5CtB,GAAImB,IAAAA,KAAMC,IAAAA,UAAWC,IAAAA,WAAYC,IAAAA,YAGrDnB,EAAMJ,EAAUC,EAFDoB,EAAUA,WAAaK,OACtBL,EAAUd,OAAOa,OAAMH,SAAQK,aAAYC,mBAG5DR,WAAaX,EAAIuB,UAAU,GAEzBvB,KAsBES,OAAS,kBAAMA,EAAOO,SAGxBD,GAAG,gBAAiB,kBAtBElB,EAAI2B,EAG3BxB,EAmBwBH,IAAAA,GAAI2B,IAAAA,QAC1BA,EAAQJ,QAA6B,WAAnBI,EAAQJ,WACtBC,MAxBiBxB,KAwBY,CAAEA,KAAI2B,YAxBlB3B,GAAI2B,IAAAA,QAG3BxB,EAAMJ,EAAUC,EAFD2B,EAAQP,eACPO,EAAQrB,OAAOsB,QAASD,EAAQC,QAAQC,KAAKF,GAAUG,QAASH,EAAQG,QAAQD,KAAKF,QAGnGb,WAAaX,EAAIuB,UAAU,GAE5BvB,KAkBKS,OAAS,kBAAMA,EAAOe,SAG3BT,GAAG,sCAAuC,cACtCa,EAAWC,MAAMb,UAGrBD,GAAG,eAAgB,aACfe,MAAMnC,IAAIc"}